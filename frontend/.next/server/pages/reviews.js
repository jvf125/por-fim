"use strict";(()=>{var e={};e.id=929,e.ids=[929,888,660],e.modules={8721:(e,t,a)=>{a.r(t),a.d(t,{config:()=>b,default:()=>v,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>p,reportWebVitals:()=>f,routeModule:()=>N,unstable_getServerProps:()=>_,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>w});var s={};a.r(s),a.d(s,{default:()=>ReviewsPage});var r=a(7093),i=a(5244),l=a(1323),o=a(6764),n=a(9467),c=a(997),d=a(6689),x=a(8165),u=a(3120),m=a(2797);let Feedback_Reviews=function({serviceId:e}){let[t,a]=(0,d.useState)([]),[s,r]=(0,d.useState)(!0),[i,l]=(0,d.useState)(5),[o,n]=(0,d.useState)(""),{addToast:x}=(0,m.p)();(0,d.useEffect)(()=>{let fetchReviews=async()=>{try{let t=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",s=await fetch(`${t}/api/services/${e}/reviews`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},credentials:"include"});if(!s.ok)throw Error("Failed");let r=await s.json();a(r.reviews||[])}catch(e){a([{id:1,user:"Maria",rating:5,comment:"\xd3timo servi\xe7o!",date:"2026-01-20"},{id:2,user:"Jo\xe3o",rating:4,comment:"Muito bom, chegou no hor\xe1rio.",date:"2026-01-15"}])}finally{r(!1)}};fetchReviews()},[e]);let submitReview=async()=>{if(!o.trim())return x("Escreva um coment\xe1rio","warning");try{let s=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",r=await fetch(`${s}/api/services/${e}/reviews`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({rating:i,comment:o}),credentials:"include"});if(!r.ok)throw Error("Falha");let c=await r.json();a([c.review,...t]),n(""),l(5),x("Obrigado pela avalia\xe7\xe3o!","success")}catch(s){x("Erro ao enviar avalia\xe7\xe3o (mock saved)","info");let e={id:Date.now(),user:"Voc\xea",rating:i,comment:o,date:new Date().toISOString()};a([e,...t]),n(""),l(5)}};return(0,c.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-bold mb-2",children:"Avalia\xe7\xf5es"}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("label",{className:"text-sm font-semibold",children:"Sua nota:"}),[1,2,3,4,5].map(e=>c.jsx("button",{onClick:()=>l(e),className:`text-xl ${e<=i?"text-yellow-500":"text-gray-300"}`,children:"★"},e))]}),c.jsx("textarea",{value:o,onChange:e=>n(e.target.value),placeholder:"Escreva sua avalia\xe7\xe3o...",className:"w-full p-2 border rounded"}),c.jsx("div",{className:"flex justify-end mt-2",children:c.jsx("button",{onClick:submitReview,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Enviar avalia\xe7\xe3o"})})]}),c.jsx("div",{children:s?c.jsx("p",{children:"Carregando avalia\xe7\xf5es..."}):t.length?t.map(e=>(0,c.jsxs)("div",{className:"border-t py-3",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsxs)("div",{children:[c.jsx("p",{className:"font-semibold",children:e.user}),c.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString("pt-BR")})]}),c.jsx("div",{className:"text-yellow-500",children:"★".repeat(e.rating)})]}),c.jsx("p",{className:"mt-2",children:e.comment})]},e.id)):c.jsx("p",{className:"text-sm text-gray-500",children:"Seja o primeiro a avaliar este servi\xe7o."})})]})};function ReviewsPage(){return(0,c.jsxs)("div",{className:"flex flex-col min-h-screen",children:[c.jsx(x.Z,{}),(0,c.jsxs)("main",{className:"flex-grow max-w-3xl mx-auto p-6",children:[c.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Avalia\xe7\xf5es do Servi\xe7o"}),c.jsx(Feedback_Reviews,{serviceId:"service_001"})]}),c.jsx(u.Z,{})]})}let v=(0,l.l)(s,"default"),p=(0,l.l)(s,"getStaticProps"),h=(0,l.l)(s,"getStaticPaths"),g=(0,l.l)(s,"getServerSideProps"),b=(0,l.l)(s,"config"),f=(0,l.l)(s,"reportWebVitals"),w=(0,l.l)(s,"unstable_getStaticProps"),S=(0,l.l)(s,"unstable_getStaticPaths"),j=(0,l.l)(s,"unstable_getStaticParams"),_=(0,l.l)(s,"unstable_getServerProps"),P=(0,l.l)(s,"unstable_getServerSideProps"),N=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/reviews",pathname:"/reviews",bundlePath:"",filename:""},components:{App:n.default,Document:o.default},userland:s})},5427:e=>{e.exports=require("@sentry/react")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},1017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[859,656,664,467,764,708],()=>__webpack_exec__(8721));module.exports=a})();