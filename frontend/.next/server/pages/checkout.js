"use strict";(()=>{var e={};e.id=222,e.ids=[222,888,660],e.modules={9954:(e,t,a)=>{a.r(t),a.d(t,{config:()=>f,default:()=>g,getServerSideProps:()=>y,getStaticPaths:()=>P,getStaticProps:()=>j,reportWebVitals:()=>N,routeModule:()=>w,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>C,unstable_getStaticParams:()=>k,unstable_getStaticPaths:()=>_,unstable_getStaticProps:()=>S});var s={};a.r(s),a.d(s,{default:()=>CheckoutPage});var l=a(7093),r=a(5244),o=a(1323),n=a(6764),c=a(9467),d=a(997),i=a(6689),m=a(8165),u=a(3120),p=a(2797);let Payments_CheckoutForm=function({amount:e=120}){let[t,a]=(0,i.useState)("pix"),[s,l]=(0,i.useState)(!1),{addToast:r}=(0,p.p)(),handlePay=async()=>{l(!0);try{let a=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",s=await fetch(`${a}/api/payments/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({amount:e,method:t}),credentials:"include"});if(!s.ok)throw Error("Erro no pagamento");let l=await s.json();r("Pagamento realizado (mock). ID: "+(l.id||"MOCK"),"success")}catch(e){r("Pagamento simulado com sucesso (fallback).","info")}finally{l(!1)}};return(0,d.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[d.jsx("h3",{className:"text-lg font-bold mb-3",children:"Pagamento"}),(0,d.jsxs)("p",{className:"mb-4",children:["Valor: ",(0,d.jsxs)("strong",{children:["R$ ",e.toFixed(2)]})]}),(0,d.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,d.jsxs)("label",{className:`block p-3 border rounded ${"pix"===t?"border-blue-500 bg-blue-50":""}`,children:[d.jsx("input",{type:"radio",name:"method",checked:"pix"===t,onChange:()=>a("pix")})," ",d.jsx("span",{className:"ml-2 font-semibold",children:"PIX (QR)"})]}),(0,d.jsxs)("label",{className:`block p-3 border rounded ${"card"===t?"border-blue-500 bg-blue-50":""}`,children:[d.jsx("input",{type:"radio",name:"method",checked:"card"===t,onChange:()=>a("card")})," ",d.jsx("span",{className:"ml-2 font-semibold",children:"Cart\xe3o de Cr\xe9dito"})]}),(0,d.jsxs)("label",{className:`block p-3 border rounded ${"boleto"===t?"border-blue-500 bg-blue-50":""}`,children:[d.jsx("input",{type:"radio",name:"method",checked:"boleto"===t,onChange:()=>a("boleto")})," ",d.jsx("span",{className:"ml-2 font-semibold",children:"Boleto"})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:handlePay,disabled:s,className:"px-4 py-2 bg-green-600 text-white rounded",children:s?"Processando...":"Pagar"}),d.jsx("button",{onClick:()=>r("Pagamento cancelado","info"),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancelar"})]})]})},Loyalty_LoyaltyPanel=function(){let[e,t]=(0,i.useState)(0);(0,i.useEffect)(()=>{let e=parseInt(localStorage.getItem("loyalty_points")||"0",10);t(e)},[]);let earn=a=>{let s=e+a;localStorage.setItem("loyalty_points",s),t(s)},redeem=a=>{if(e<a)return alert("Pontos insuficientes");let s=e-a;localStorage.setItem("loyalty_points",s),t(s),alert("Cupom aplicado: R$ "+(a/10).toFixed(2))};return(0,d.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[d.jsx("h3",{className:"text-lg font-bold mb-2",children:"Programa de Fidelidade"}),(0,d.jsxs)("p",{className:"mb-2",children:["Pontos acumulados: ",d.jsx("strong",{children:e})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>earn(10),className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Ganhar 10 pts"}),d.jsx("button",{onClick:()=>redeem(50),className:"px-3 py-2 bg-green-600 text-white rounded",children:"Resgatar 50 pts"})]}),d.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"1 ponto = R$0.10 (exemplo)"})]})};var x=a(5152),h=a.n(x);let b=h()(()=>a.e(375).then(a.bind(a,7859)),{loadableGenerated:{modules:["checkout.jsx -> ../components/Notifications/PushManager"]},ssr:!1});function CheckoutPage(){return(0,d.jsxs)("div",{className:"flex flex-col min-h-screen",children:[d.jsx(m.Z,{}),(0,d.jsxs)("main",{className:"flex-grow max-w-3xl mx-auto p-6 space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Checkout"}),(0,d.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsx("div",{className:"card",children:d.jsx(Payments_CheckoutForm,{})}),d.jsx("div",{className:"card",children:d.jsx(Loyalty_LoyaltyPanel,{})})]}),d.jsx("div",{className:"mt-4",children:d.jsx(b,{})})]}),d.jsx(u.Z,{})]})}let g=(0,o.l)(s,"default"),j=(0,o.l)(s,"getStaticProps"),P=(0,o.l)(s,"getStaticPaths"),y=(0,o.l)(s,"getServerSideProps"),f=(0,o.l)(s,"config"),N=(0,o.l)(s,"reportWebVitals"),S=(0,o.l)(s,"unstable_getStaticProps"),_=(0,o.l)(s,"unstable_getStaticPaths"),k=(0,o.l)(s,"unstable_getStaticParams"),v=(0,o.l)(s,"unstable_getServerProps"),C=(0,o.l)(s,"unstable_getServerSideProps"),w=new l.PagesRouteModule({definition:{kind:r.x.PAGES,page:"/checkout",pathname:"/checkout",bundlePath:"",filename:""},components:{App:c.default,Document:n.default},userland:s})},5427:e=>{e.exports=require("@sentry/react")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},1017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[859,656,664,152,467,764,708],()=>__webpack_exec__(9954));module.exports=a})();