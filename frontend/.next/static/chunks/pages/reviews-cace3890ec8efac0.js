(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{4119:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reviews",function(){return t(2028)}])},2028:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return ReviewsPage}});var s=t(5893),i=t(7294),r=t(8165),n=t(3120),c=t(2797),l=t(3454),Feedback_Reviews=function(e){let{serviceId:a}=e,[t,r]=(0,i.useState)([]),[n,o]=(0,i.useState)(!0),[d,x]=(0,i.useState)(5),[m,h]=(0,i.useState)(""),{addToast:u}=(0,c.p)();(0,i.useEffect)(()=>{let fetchReviews=async()=>{try{let e=l.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",t=await fetch("".concat(e,"/api/services/").concat(a,"/reviews"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},credentials:"include"});if(!t.ok)throw Error("Failed");let s=await t.json();r(s.reviews||[])}catch(e){r([{id:1,user:"Maria",rating:5,comment:"\xd3timo servi\xe7o!",date:"2026-01-20"},{id:2,user:"Jo\xe3o",rating:4,comment:"Muito bom, chegou no hor\xe1rio.",date:"2026-01-15"}])}finally{o(!1)}};fetchReviews()},[a]);let submitReview=async()=>{if(!m.trim())return u("Escreva um coment\xe1rio","warning");try{let e=l.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",s=await fetch("".concat(e,"/api/services/").concat(a,"/reviews"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},body:JSON.stringify({rating:d,comment:m}),credentials:"include"});if(!s.ok)throw Error("Falha");let i=await s.json();r([i.review,...t]),h(""),x(5),u("Obrigado pela avalia\xe7\xe3o!","success")}catch(a){u("Erro ao enviar avalia\xe7\xe3o (mock saved)","info");let e={id:Date.now(),user:"Voc\xea",rating:d,comment:m,date:new Date().toISOString()};r([e,...t]),h(""),x(5)}};return(0,s.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Avalia\xe7\xf5es"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold",children:"Sua nota:"}),[1,2,3,4,5].map(e=>(0,s.jsx)("button",{onClick:()=>x(e),className:"text-xl ".concat(e<=d?"text-yellow-500":"text-gray-300"),children:"★"},e))]}),(0,s.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),placeholder:"Escreva sua avalia\xe7\xe3o...",className:"w-full p-2 border rounded"}),(0,s.jsx)("div",{className:"flex justify-end mt-2",children:(0,s.jsx)("button",{onClick:submitReview,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Enviar avalia\xe7\xe3o"})})]}),(0,s.jsx)("div",{children:n?(0,s.jsx)("p",{children:"Carregando avalia\xe7\xf5es..."}):t.length?t.map(e=>(0,s.jsxs)("div",{className:"border-t py-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:e.user}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString("pt-BR")})]}),(0,s.jsx)("div",{className:"text-yellow-500",children:"★".repeat(e.rating)})]}),(0,s.jsx)("p",{className:"mt-2",children:e.comment})]},e.id)):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Seja o primeiro a avaliar este servi\xe7o."})})]})};function ReviewsPage(){return(0,s.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,s.jsx)(r.Z,{}),(0,s.jsxs)("main",{className:"flex-grow max-w-3xl mx-auto p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Avalia\xe7\xf5es do Servi\xe7o"}),(0,s.jsx)(Feedback_Reviews,{serviceId:"service_001"})]}),(0,s.jsx)(n.Z,{})]})}}},function(e){e.O(0,[664,708,774,888,179],function(){return e(e.s=4119)}),_N_E=e.O()}]);