(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{8310:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(8359)}])},8359:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Dashboard}});var a=s(5893),l=s(7294),r=s(8165),n=s(3120),o=s(3454),Dashboard_ClientDashboard=function(e){var t;let{userId:s}=e,[r,n]=(0,l.useState)([]),[d,c]=(0,l.useState)({totalServices:0,totalSpent:0,nextBooking:null}),[i,x]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let fetchBookings=async()=>{try{let e=o.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",t=await fetch("".concat(e,"/api/clients/").concat(s,"/bookings"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},credentials:"include"});if(!t.ok)throw Error("Falha ao buscar agendamentos");let a=await t.json();c(a.stats),n(a.bookings),x(!1)}catch(e){console.error("âŒ Erro ao buscar agendamentos:",e),c({totalServices:0,totalSpent:0,nextBooking:null}),n([]),x(!1)}};s&&fetchBookings()},[s]);let getStatusBadge=e=>({scheduled:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return i?(0,a.jsx)("div",{className:"p-6 text-center",children:"Carregando..."}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-6 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsx)("p",{className:"text-gray-600 font-semibold",children:"Total de Servi\xe7os"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:d.totalServices})]}),(0,a.jsxs)("div",{className:"p-6 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsx)("p",{className:"text-gray-600 font-semibold",children:"Total Gasto"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:["R$ ",d.totalSpent.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"p-6 bg-purple-50 rounded-lg border border-purple-200",children:[(0,a.jsx)("p",{className:"text-gray-600 font-semibold",children:"Pr\xf3ximo Agendamento"}),(0,a.jsx)("p",{className:"text-lg font-bold text-purple-600 mt-2",children:null===(t=d.nextBooking)||void 0===t?void 0:t.toLocaleDateString("pt-BR")})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Agendamentos"}),(0,a.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:e.service}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.address}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.date.toLocaleDateString("pt-BR")})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-lg",children:["R$ ",e.price.toFixed(2)]}),(0,a.jsx)("span",{className:"text-sm font-semibold px-3 py-1 rounded ".concat(getStatusBadge(e.status)),children:"scheduled"===e.status?"Agendado":"Conclu\xeddo"})]})]},e.id))})]})]})};function Dashboard(){return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(r.Z,{}),(0,a.jsxs)("main",{className:"flex-grow max-w-7xl mx-auto w-full px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Meu Dashboard"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Editar Perfil"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Sair"})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 mb-8 border-b",children:[(0,a.jsx)("button",{className:"px-4 py-2 border-b-2 border-blue-600 text-blue-600 font-semibold",children:"Agendamentos"}),(0,a.jsx)("button",{className:"px-4 py-2 text-gray-600 hover:text-blue-600",children:"Hist\xf3rico"}),(0,a.jsx)("button",{className:"px-4 py-2 text-gray-600 hover:text-blue-600",children:"Avalia\xe7\xf5es"}),(0,a.jsx)("button",{className:"px-4 py-2 text-gray-600 hover:text-blue-600",children:"Pagamentos"})]}),(0,a.jsx)(Dashboard_ClientDashboard,{userId:"123"})]}),(0,a.jsx)(n.Z,{})]})}}},function(e){e.O(0,[664,708,774,888,179],function(){return e(e.s=8310)}),_N_E=e.O()}]);