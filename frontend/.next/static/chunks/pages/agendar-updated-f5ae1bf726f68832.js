(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{7909:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agendar-updated",function(){return a(2197)}])},6398:function(e,l,a){"use strict";var t=a(5893),s=a(7294);l.Z=e=>{let{onDateSelected:l,unavailableDates:a=[]}=e,[n,r]=(0,s.useState)(new Date),[o,i]=(0,s.useState)(null),getDaysInMonth=e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),getFirstDayOfMonth=e=>new Date(e.getFullYear(),e.getMonth(),1).getDay(),isDateUnavailable=e=>a.some(l=>new Date(l).toDateString()===e.toDateString()),handleDateClick=e=>{let a=new Date(n.getFullYear(),n.getMonth(),e);!isDateUnavailable(a)&&a>=new Date&&(i(a),l(a))};return(0,t.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Selecione a Data"}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("button",{onClick:()=>r(new Date(n.getFullYear(),n.getMonth()-1)),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"←"}),(0,t.jsx)("span",{className:"font-bold",children:n.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),(0,t.jsx)("button",{onClick:()=>r(new Date(n.getFullYear(),n.getMonth()+1)),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"→"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sab"].map(e=>(0,t.jsx)("div",{className:"text-center font-bold text-gray-600",children:e},e)),(()=>{let e=getDaysInMonth(n),l=getFirstDayOfMonth(n),a=[];for(let e=0;e<l;e++)a.push((0,t.jsx)("div",{className:"p-2"},"empty-".concat(e)));for(let l=1;l<=e;l++){let e=new Date(n.getFullYear(),n.getMonth(),l),s=isDateUnavailable(e),r=(null==o?void 0:o.toDateString())===e.toDateString(),i=e<new Date;a.push((0,t.jsx)("button",{onClick:()=>handleDateClick(l),disabled:s||i,className:"p-2 rounded text-center font-semibold ".concat(r?"bg-blue-600 text-white":s||i?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 hover:bg-blue-100"),children:l},l))}return a})()]}),o&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded",children:(0,t.jsxs)("p",{className:"text-sm font-semibold text-blue-800",children:["Data selecionada: ",o.toLocaleDateString("pt-BR")]})})]})}},8281:function(e,l,a){"use strict";var t=a(5893),s=a(7294);l.Z=e=>{let{services:l=[],date:a=null}=e,[n,r]=(0,s.useState)(0),[o,i]=(0,s.useState)("unica"),[d,c]=(0,s.useState)("normal"),[u,m]=(0,s.useState)(0),x={unica:{label:"\xdanica vez",multiplier:1},semanal:{label:"Semanal",multiplier:.8},quinzenal:{label:"Quinzenal",multiplier:.9},mensal:{label:"Mensal",multiplier:.95}},b={normal:{label:"Normal (2-3 dias)",multiplier:1},express:{label:"Express (24h)",multiplier:1.3},emergencia:{label:"Emerg\xeancia (mesma hora)",multiplier:1.5}};return(0,s.useEffect)(()=>{let e=l.reduce((e,l)=>e+l.price,0),a=.5*n,t=b[d].multiplier,s=x[o].multiplier;m(Math.max((e+a)*t*s,0))},[l,n,o,d]),(0,t.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Calculadora de Pre\xe7os"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block font-semibold mb-2",children:"Metragem (m\xb2)"}),(0,t.jsx)("input",{type:"number",value:n,onChange:e=>r(Number(e.target.value)),placeholder:"Ex: 100",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-600"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"R$ 0,50 por m\xb2"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block font-semibold mb-2",children:"Frequ\xeancia"}),(0,t.jsx)("select",{value:o,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-600",children:Object.entries(x).map(e=>{let[l,a]=e;return(0,t.jsx)("option",{value:l,children:a.label},l)})})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block font-semibold mb-2",children:"Urg\xeancia"}),(0,t.jsx)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-600",children:Object.entries(b).map(e=>{let[l,a]=e;return(0,t.jsx)("option",{value:l,children:a.label},l)})})]}),l.length>0&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded",children:[(0,t.jsx)("p",{className:"font-semibold mb-2",children:"Servi\xe7os:"}),(0,t.jsx)("ul",{className:"space-y-1",children:l.map(e=>(0,t.jsxs)("li",{className:"text-sm text-gray-700",children:["• ",e.name,": R$ ",e.price.toFixed(2)]},e.id))})]}),(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border-2 border-blue-600",children:[(0,t.jsx)("p",{className:"text-sm text-blue-600 font-semibold",children:"Pre\xe7o Total Estimado"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:["R$ ",u.toFixed(2)]}),a&&(0,t.jsxs)("p",{className:"text-sm text-blue-600 mt-2",children:["Para ",a.toLocaleDateString("pt-BR")]})]})]})}},8717:function(e,l,a){"use strict";var t=a(5893),s=a(7294);l.Z=e=>{let{onServiceSelected:l,services:a=[]}=e,[n,r]=(0,s.useState)([]),o=a.length>0?a:[{id:1,name:"Limpeza Padr\xe3o",price:80,icon:"\uD83E\uDDF9"},{id:2,name:"Limpeza Profunda",price:120,icon:"✨"},{id:3,name:"Mudan\xe7a (In/Out)",price:150,icon:"\uD83D\uDCE6"},{id:4,name:"Limpeza de Vidros",price:30,icon:"\uD83E\uDE9F"},{id:5,name:"Limpeza de Refrigerador",price:25,icon:"❄️"},{id:6,name:"Limpeza de Forno",price:40,icon:"\uD83D\uDD25"}],handleServiceToggle=e=>{let a=n.some(l=>l.id===e.id)?n.filter(l=>l.id!==e.id):[...n,e];r(a),l(a)};return(0,t.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Selecione os Servi\xe7os"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(e=>(0,t.jsx)("button",{onClick:()=>handleServiceToggle(e),className:"p-4 rounded-lg border-2 transition text-left ".concat(n.some(l=>l.id===e.id)?"border-blue-600 bg-blue-50":"border-gray-300 bg-white hover:border-blue-300"),children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-bold text-lg",children:[e.icon," ",e.name]}),(0,t.jsxs)("p",{className:"text-gray-600 text-sm mt-1",children:["R$ ",e.price.toFixed(2)]})]}),(0,t.jsx)("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center ".concat(n.some(l=>l.id===e.id)?"bg-blue-600 border-blue-600":"border-gray-300"),children:n.some(l=>l.id===e.id)&&(0,t.jsx)("span",{className:"text-white text-sm",children:"✓"})})]})},e.id))}),n.length>0&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded",children:[(0,t.jsx)("p",{className:"font-semibold text-blue-900",children:"Servi\xe7os selecionados:"}),(0,t.jsx)("ul",{className:"mt-2 space-y-1",children:n.map(e=>(0,t.jsxs)("li",{className:"text-blue-800 text-sm",children:["• ",e.name," - R$ ",e.price.toFixed(2)]},e.id))})]})]})}},2197:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return Agendar}});var t=a(5893),s=a(7294),n=a(8165),r=a(3120),o=a(6398),i=a(8717);a(8281);var d=a(3454);function Agendar(){let[e,l]=(0,s.useState)(1),[a,c]=(0,s.useState)(null),[u,m]=(0,s.useState)([]),[x,b]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),[p,j]=(0,s.useState)(""),[f,v]=(0,s.useState)([]),[N,y]=(0,s.useState)(null),[w,D]=(0,s.useState)(""),[S,k]=(0,s.useState)(!1),handleSubmit=async()=>{try{var e,t;if(k(!0),!a||!u.length||!x||!p){alert("⚠️ Por favor, preencha todos os campos obrigat\xf3rios"),k(!1);return}let s={userId:1,serviceId:(null===(e=u[0])||void 0===e?void 0:e.id)||1,date:a,time:"10:00",address:x,phone:p,price:calculateTotal(),notes:w},n=localStorage.getItem("token")||"demo-token",r=d.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",o=await fetch("".concat(r,"/api/bookings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(s)});if(!o.ok){let e=await o.json();throw Error(e.error||"Falha ao agendar")}let i=await o.json();console.log("✅ Agendamento criado:",i),alert("✅ Agendamento realizado com sucesso!\nID: ".concat((null===(t=i.booking)||void 0===t?void 0:t.id)||"N/A")),c(null),m([]),b(""),j(""),g(""),D(""),l(1)}catch(e){console.error("❌ Erro ao processar agendamento:",e),alert("❌ Erro: ".concat(e.message||"Falha ao agendar. Tente novamente."))}finally{k(!1)}},calculateTotal=()=>u.reduce((e,l)=>e+(l.price||0),0);return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,t.jsx)(n.Z,{}),(0,t.jsxs)("main",{className:"flex-grow max-w-4xl mx-auto w-full px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Agendar Servi\xe7o de Limpeza"}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-4",children:[1,2,3,4].map(l=>(0,t.jsx)("div",{className:"flex-1 h-2 mx-1 rounded transition ".concat(l<=e?"bg-blue-600":"bg-gray-300")},l))}),(0,t.jsxs)("p",{className:"text-center text-gray-600 font-semibold",children:["Passo ",e," de 4"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[1===e&&(0,t.jsx)(o.Z,{onDateSelected:c}),2===e&&(0,t.jsx)(i.Z,{onServiceSelected:m}),3===e&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Localiza\xe7\xe3o e Detalhes"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block font-semibold mb-2",children:"Telefone *"}),(0,t.jsx)("input",{type:"tel",value:p,onChange:e=>j(e.target.value),placeholder:"(11) 9999-9999",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block font-semibold mb-2",children:"Endere\xe7o Completo *"}),(0,t.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),placeholder:"Rua, n\xfamero, complemento, bairro, cidade",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block font-semibold mb-2",children:"CEP"}),(0,t.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"00000-000",className:"w-48 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block font-semibold mb-2",children:"Notas Adicionais"}),(0,t.jsx)("textarea",{value:w,onChange:e=>D(e.target.value),placeholder:"Informa\xe7\xf5es adicionais sobre o servi\xe7o...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-600",rows:"4"})]})]})]}),4===e&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Resumo do Agendamento"}),(0,t.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg space-y-3",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Data:"})," ",a]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Servi\xe7o:"})," ",u.map(e=>e.name).join(", ")]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Endere\xe7o:"})," ",x]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Telefone:"})," ",p]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Total:"})," R$ ",calculateTotal().toFixed(2)]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-4 mb-8",children:[(0,t.jsx)("button",{onClick:()=>{e>1&&l(e-1)},disabled:1===e,className:"px-6 py-3 border border-gray-300 rounded-lg font-semibold disabled:opacity-50",children:"Voltar"}),e<4?(0,t.jsx)("button",{onClick:()=>{e<4&&l(e+1)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700",children:"Pr\xf3ximo"}):(0,t.jsx)("button",{onClick:handleSubmit,disabled:S,className:"px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50",children:S?"⏳ Agendando...":"✅ Confirmar Agendamento"})]})]}),(0,t.jsx)(r.Z,{})]})}}},function(e){e.O(0,[664,708,774,888,179],function(){return e(e.s=7909)}),_N_E=e.O()}]);